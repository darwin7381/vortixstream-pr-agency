# ğŸ¯ API åˆ†é¡èˆ‡è·¯å¾‘è¦ç¯„

**ç‰ˆæœ¬**: v1.0  
**å»ºç«‹æ—¥æœŸ**: 2025-12-29  
**ç›®çš„**: ç³»çµ±åŒ–ç®¡ç† APIï¼Œæå‡æ•ˆèƒ½ã€å®‰å…¨æ€§å’Œå¯ç¶­è­·æ€§

---

## ğŸŒŸ æ ¸å¿ƒç†å¿µ

### ç‚ºä»€éº¼è¦åˆ†é¡ APIï¼Ÿ

**1. æ•ˆèƒ½å„ªåŒ–ï¼ˆå¿«å–ç­–ç•¥ï¼‰**ï¼š
```
ä¸åŒé¡å‹çš„ API æœ‰ä¸åŒçš„å¿«å–éœ€æ±‚ï¼š
- å…¬é–‹è³‡æ–™ï¼šå¯å¤§é‡å¿«å–ï¼ˆæ¸›å°‘ 90% å¾Œç«¯è² è¼‰ï¼‰
- å¯«å…¥æ“ä½œï¼šçµ•ä¸å¿«å–ï¼ˆç¢ºä¿è³‡æ–™å³æ™‚æ€§ï¼‰
- ç®¡ç†æ“ä½œï¼šä¸å¿«å–ä½†éœ€èªè­‰
```

**2. å®‰å…¨æ€§åˆ†å±¤**ï¼š
```
- /public/ï¼šç„¡éœ€èªè­‰ï¼Œä½†å¯èƒ½æœ‰ rate limiting
- /write/ï¼šéœ€è¦åŸºç¤é©—è­‰ï¼ˆé˜² CSRFï¼‰
- /admin/ï¼šéœ€è¦ç®¡ç†å“¡æ¬Šé™
- /auth/ï¼šç‰¹æ®Šè™•ç†ï¼ˆç™»å…¥ã€è¨»å†Šï¼‰
```

**3. å¯ç¶­è­·æ€§**ï¼š
```
- ä¸€çœ¼çœ‹å‡º API çš„æ€§è³ª
- ä¿®æ”¹å¿«å–ç­–ç•¥æ™‚ä¸å½±éŸ¿å…¶ä»– API
- æ¬Šé™æ§åˆ¶æ›´æ¸…æ™°
```

---

## ğŸ“Š VortixPR çš„ API åˆ†é¡

### 1. `/api/public/` - å…¬é–‹è³‡æ–™

**å®šç¾©**ï¼šæ‰€æœ‰äººçœ‹åˆ°çš„å…§å®¹ç›¸åŒï¼Œè®Šå‹•é »ç‡ä½

**ç‰¹æ€§**ï¼š
- âœ… å¯å¤§é‡å¿«å–ï¼ˆ1-24 å°æ™‚ï¼‰
- âœ… ç„¡éœ€èªè­‰
- âœ… åªè®€æ“ä½œ
- âœ… æ¸›å°‘å¾Œç«¯è² è¼‰

**ç¯„ä¾‹**ï¼š
```
GET /api/public/blog/posts              # æ–‡ç« åˆ—è¡¨
GET /api/public/blog/posts/{slug}       # å–®ç¯‡æ–‡ç« 
GET /api/public/pricing/packages        # å®šåƒ¹æ–¹æ¡ˆ
GET /api/public/pr-packages/            # PR å¥—é¤
```

**å¿«å–è¨­å®š**ï¼š
```
Cache-Control: public, max-age=3600
CDN-Cache-Control: max-age=7200
```

---

### 2. `/api/write/` - å¯«å…¥æ“ä½œ

**å®šç¾©**ï¼šæ”¹è®Šè³‡æ–™ç‹€æ…‹çš„æ“ä½œ

**ç‰¹æ€§**ï¼š
- âš ï¸ çµ•ä¸å¿«å–
- âœ… å¯èƒ½éœ€è¦åŸºç¤é©—è­‰ï¼ˆCSRF tokenï¼‰
- âœ… Rate limitingï¼ˆé˜²æ¿«ç”¨ï¼‰
- âœ… ä¸€èˆ¬ç”¨æˆ¶å¯ç”¨

**ç¯„ä¾‹**ï¼š
```
POST /api/write/contact/submit          # æäº¤è¯çµ¡è¡¨å–®
POST /api/write/newsletter/subscribe    # è¨‚é–±é›»å­å ±
POST /api/write/publisher/apply         # Publisher ç”³è«‹
```

**å®‰å…¨æªæ–½**ï¼š
- CSRF Protection
- Rate Limitingï¼ˆæ¯ IP æ¯å°æ™‚ 100 æ¬¡ï¼‰
- è¼¸å…¥é©—è­‰

---

### 3. `/api/admin/` - ç®¡ç†æ“ä½œ

**å®šç¾©**ï¼šç®¡ç†å“¡å°ˆç”¨ï¼Œéœ€è¦èªè­‰

**ç‰¹æ€§**ï¼š
- ğŸ” éœ€è¦ admin/super_admin æ¬Šé™
- âš ï¸ ä¸å¿«å–
- âœ… å®Œæ•´çš„ CRUD æ“ä½œ
- âœ… æ•æ„Ÿè³‡æ–™

**ç¯„ä¾‹**ï¼š
```
GET    /api/admin/blog/posts            # æ–‡ç« ç®¡ç†
POST   /api/admin/blog/posts            # å‰µå»ºæ–‡ç« 
PUT    /api/admin/blog/posts/{id}       # æ›´æ–°æ–‡ç« 
DELETE /api/admin/blog/posts/{id}       # åˆªé™¤æ–‡ç« 

GET    /api/admin/users/                # ç”¨æˆ¶ç®¡ç†
PATCH  /api/admin/users/{id}/role/      # ä¿®æ”¹è§’è‰²
POST   /api/admin/users/{id}/ban/       # å°ç¦ç”¨æˆ¶
```

**æ¬Šé™æª¢æŸ¥**ï¼š
```python
@router.get("/users/")
async def get_users(current_user = Depends(require_admin)):
    # åªæœ‰ admin å¯è¨ªå•
```

---

### 4. `/api/auth/` - èªè­‰ç›¸é—œ

**å®šç¾©**ï¼šç™»å…¥ã€è¨»å†Šã€OAuth ç­‰èªè­‰æ“ä½œ

**ç‰¹æ€§**ï¼š
- ğŸ”‘ ç‰¹æ®Šå®‰å…¨è™•ç†
- âš ï¸ ä¸å¿«å–
- âœ… å…¬é–‹è¨ªå•ï¼ˆä½†æœ‰é™åˆ¶ï¼‰
- âœ… Rate limitingï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰

**ç¯„ä¾‹**ï¼š
```
POST /api/auth/register                 # è¨»å†Š
POST /api/auth/login                    # ç™»å…¥
GET  /api/auth/me                       # ç•¶å‰ç”¨æˆ¶è³‡è¨Š
POST /api/auth/refresh                  # åˆ·æ–° Token
GET  /api/auth/google/login             # Google OAuth
GET  /api/auth/google/callback          # OAuth å›èª¿
```

**å®‰å…¨æªæ–½**ï¼š
- Rate Limitingï¼ˆæ¯ IP æ¯åˆ†é˜ 10 æ¬¡ç™»å…¥å˜—è©¦ï¼‰
- å¯†ç¢¼åŠ å¯†ï¼ˆbcryptï¼‰
- JWT Token éæœŸæ™‚é–“

---

### 5. `/api/private/` æˆ– `/api/me/` - å€‹äººåŒ–è³‡æ–™ï¼ˆå»ºè­°æ–°å¢ï¼‰

**å®šç¾©**ï¼šç™»å…¥ç”¨æˆ¶çš„å€‹äººè³‡æ–™å’Œæ“ä½œ

**ç‰¹æ€§**ï¼š
- ğŸ” éœ€è¦ç™»å…¥ï¼ˆä½†ä¸éœ€è¦ adminï¼‰
- âš ï¸ ä¸å¿«å–æˆ–çŸ­å¿«å–
- âœ… å€‹äººåŒ–å…§å®¹
- âœ… ä¸€èˆ¬ç”¨æˆ¶å¯ç”¨

**å»ºè­°çš„ API**ï¼š
```
GET    /api/me/profile                  # å€‹äººè³‡æ–™
PUT    /api/me/profile                  # æ›´æ–°å€‹äººè³‡æ–™
GET    /api/me/campaigns                # æˆ‘çš„ PR Campaigns
POST   /api/me/campaigns                # å‰µå»º Campaign
GET    /api/me/notifications            # æˆ‘çš„é€šçŸ¥
PUT    /api/me/settings                 # å€‹äººè¨­å®š
```

**èˆ‡ /admin/ çš„å·®ç•°**ï¼š
- `/admin/users/` - ç®¡ç†æ‰€æœ‰ç”¨æˆ¶ï¼ˆéœ€ adminï¼‰
- `/api/me/profile` - ç®¡ç†è‡ªå·±çš„è³‡æ–™ï¼ˆç™»å…¥å³å¯ï¼‰

---

## ğŸ—ï¸ è·¯å¾‘çµæ§‹è¨­è¨ˆåŸå‰‡

### åŸå‰‡ 1ï¼šæŒ‰è¨ªå•æ¬Šé™åˆ†é¡

```
/public/  â†’ å…¬é–‹è¨ªå•
/write/   â†’ å…¬é–‹å¯«å…¥ï¼ˆæœ‰é™åˆ¶ï¼‰
/auth/    â†’ èªè­‰ç›¸é—œ
/me/      â†’ ç™»å…¥ç”¨æˆ¶
/admin/   â†’ ç®¡ç†å“¡
```

### åŸå‰‡ 2ï¼šæŒ‰å¿«å–ç­–ç•¥åˆ†é¡

```
å¯å¿«å–ï¼š/public/
ä¸å¿«å–ï¼š/write/, /admin/, /auth/, /me/
```

### åŸå‰‡ 3ï¼šæŒ‰è³‡æ–™æ•æ„Ÿåº¦åˆ†é¡

```
å…¬é–‹ï¼š/public/
å—é™ï¼š/write/ï¼ˆrate limitï¼‰
ç§å¯†ï¼š/me/ï¼ˆéœ€ç™»å…¥ï¼‰
æ•æ„Ÿï¼š/admin/ï¼ˆéœ€æ¬Šé™ï¼‰
```

---

## ğŸ“‹ å®Œæ•´çš„ API åˆ†é¡æ±ºç­–æ¨¹

```
æ–°å¢ API æ™‚ï¼Œä¾åºåˆ¤æ–·ï¼š

1. æ˜¯å¦ç‚ºèªè­‰ç›¸é—œï¼Ÿ
   â”œâ”€ æ˜¯ â†’ /api/auth/
   â””â”€ å¦ â†’ ç¹¼çºŒ

2. æ˜¯å¦éœ€è¦ç®¡ç†å“¡æ¬Šé™ï¼Ÿ
   â”œâ”€ æ˜¯ â†’ /api/admin/
   â””â”€ å¦ â†’ ç¹¼çºŒ

3. æ˜¯å¦ç‚ºå¯«å…¥æ“ä½œï¼Ÿ
   â”œâ”€ æ˜¯ â†’ /api/write/
   â””â”€ å¦ â†’ ç¹¼çºŒ

4. æ˜¯å¦ç‚ºå€‹äººåŒ–è³‡æ–™ï¼Ÿ
   â”œâ”€ æ˜¯ â†’ /api/me/
   â””â”€ å¦ â†’ ç¹¼çºŒ

5. é è¨­ â†’ /api/public/
```

---

## ğŸ”§ å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹

### éƒ¨è½æ ¼ç›¸é—œ API

```
å…¬é–‹é–±è®€ï¼š
GET /api/public/blog/posts              # æ–‡ç« åˆ—è¡¨ï¼ˆå¿«å– 30 åˆ†é˜ï¼‰
GET /api/public/blog/posts/{slug}       # å–®ç¯‡æ–‡ç« ï¼ˆå¿«å– 1 å°æ™‚ï¼‰

ç”¨æˆ¶äº’å‹•ï¼š
POST /api/write/blog/comments           # ç™¼è¡¨è©•è«–ï¼ˆä¸å¿«å–ï¼Œéœ€ç™»å…¥ï¼‰
POST /api/write/blog/{id}/like          # æŒ‰è®šï¼ˆä¸å¿«å–ï¼Œéœ€ç™»å…¥ï¼‰

å€‹äººç®¡ç†ï¼š
GET /api/me/blog/drafts                 # æˆ‘çš„è‰ç¨¿ï¼ˆä¸å¿«å–ï¼Œéœ€ç™»å…¥ï¼‰
POST /api/me/blog/drafts                # å‰µå»ºè‰ç¨¿

ç®¡ç†å“¡æ“ä½œï¼š
POST /api/admin/blog/posts              # å‰µå»ºæ–‡ç« ï¼ˆä¸å¿«å–ï¼Œéœ€ adminï¼‰
DELETE /api/admin/blog/posts/{id}       # åˆªé™¤æ–‡ç« 
```

### ç”¨æˆ¶ç›¸é—œ API

```
èªè­‰ï¼š
POST /api/auth/register                 # è¨»å†Š
POST /api/auth/login                    # ç™»å…¥

å€‹äººè³‡æ–™ï¼š
GET /api/me/profile                     # æˆ‘çš„è³‡æ–™
PUT /api/me/profile                     # æ›´æ–°è³‡æ–™
POST /api/me/avatar                     # ä¸Šå‚³é ­åƒ

ç®¡ç†å“¡æ“ä½œï¼š
GET /api/admin/users/                   # æ‰€æœ‰ç”¨æˆ¶åˆ—è¡¨
PATCH /api/admin/users/{id}/role/       # ä¿®æ”¹è§’è‰²
POST /api/admin/users/{id}/ban/         # å°ç¦ç”¨æˆ¶
```

---

## âš ï¸ ç›®å‰å°ˆæ¡ˆçš„ç‹€æ³åˆ†æ

### å·²å¯¦ç¾

âœ… **Public APIs**ï¼š
- Blog, Pricing, PR Packages
- å®Œæ•´çš„å¿«å–ç­–ç•¥

âœ… **Write APIs**ï¼š
- Contact, Newsletter
- ä¸å¿«å–ï¼Œæœ‰åŸºç¤é©—è­‰

âœ… **Admin APIs**ï¼š
- Blog, Pricing, PR Packages, Contact, Newsletter, Media
- User, Invitation, Settings
- éœ€è¦èªè­‰

âœ… **Auth APIs**ï¼š
- Register, Login, OAuth
- å®Œæ•´çš„èªè­‰ç³»çµ±

---

### å»ºè­°æ”¹é€²

#### 1. æ–°å¢ `/api/me/` åˆ†é¡

**ç›®çš„**ï¼šåˆ†é›¢ã€Œç”¨æˆ¶è‡ªå·±çš„æ“ä½œã€å’Œã€Œç®¡ç†å“¡æ“ä½œã€

**å¥½è™•**ï¼š
- æ¬Šé™æ›´æ¸…æ™°ï¼ˆç™»å…¥ vs ç®¡ç†å“¡ï¼‰
- æœªä¾†æœ‰ç”¨æˆ¶è‡ªåŠ©åŠŸèƒ½æ™‚æ›´æ–¹ä¾¿
- API èªç¾©æ›´æ˜ç¢º

**ç¯„ä¾‹**ï¼š
```python
# æ–°å¢ me.py
router = APIRouter(prefix="/api/me")

@router.get("/profile")        # æˆ‘çš„è³‡æ–™
@router.put("/profile")        # æ›´æ–°è³‡æ–™
@router.get("/campaigns")      # æˆ‘çš„ Campaigns
@router.post("/campaigns")     # å‰µå»º Campaign
```

---

#### 2. çµ±ä¸€çµå°¾æ–œç·šè¦å‰‡

**ç›®å‰ç‹€æ³**ï¼š
- æœ‰çš„æœ‰æ–œç·šï¼š`/api/admin/invitations/`
- æœ‰çš„æ²’æœ‰ï¼š`/api/admin/users`ï¼ˆå·²ä¿®å¾©ï¼‰

**å»ºè­°**ï¼š
- âœ… **çµ±ä¸€ä¸åŠ æ–œç·š**ï¼ˆé™¤éæ˜¯æ ¹è·¯å¾‘ `/`ï¼‰
- âœ… ä½¿ç”¨æ˜ç¢ºçš„å­è·¯å¾‘ï¼ˆ`/users` è€Œä¸æ˜¯ `/`ï¼‰

**æª¢æŸ¥æŒ‡ä»¤**ï¼š
```bash
# æª¢æŸ¥æ‰€æœ‰ API ç«¯é»
grep -r "@router" backend/app/api/*.py | grep "get\|post\|put\|delete"

# ç¢ºä¿æ ¼å¼ä¸€è‡´
```

---

#### 3. API ç‰ˆæœ¬æ§åˆ¶ï¼ˆæœªä¾†ï¼‰

**ç•¶ API éœ€è¦å¤§æ”¹å‹•æ™‚**ï¼š
```
/api/v1/public/blog/posts   # èˆŠç‰ˆ
/api/v2/public/blog/posts   # æ–°ç‰ˆ
```

**ç›®å‰ä¸éœ€è¦**ï¼Œä½†è¨˜éŒ„å‚™ç”¨ã€‚

---

## ğŸ¨ è·¯ç”±å‘½åè¦ç¯„

### è³‡æºå‘½å

**ä½¿ç”¨è¤‡æ•¸åè©**ï¼š
```
âœ… /users      ï¼ˆè¤‡æ•¸ï¼‰
âœ… /posts
âœ… /packages

âŒ /user       ï¼ˆå–®æ•¸ï¼‰
âŒ /post
```

### å‹•ä½œå‘½å

**ä½¿ç”¨å‹•è©ï¼ˆé CRUD æ“ä½œï¼‰**ï¼š
```
âœ… /users/{id}/activate     ï¼ˆå‹•è©ï¼‰
âœ… /users/{id}/ban
âœ… /users/{id}/unban

âŒ /users/{id}/activation   ï¼ˆåè©ï¼‰
```

### å·¢ç‹€è³‡æº

**ä¸è¦è¶…é 2 å±¤**ï¼š
```
âœ… /users/{id}/posts           ï¼ˆ2 å±¤ï¼‰
âœ… /organizations/{id}/members

âŒ /users/{id}/posts/{pid}/comments/{cid}  ï¼ˆå¤ªæ·±ï¼‰
```

---

## ğŸ“ å®Œæ•´çš„è·¯å¾‘ç¯„ä¾‹

### ç•¶å‰çµæ§‹ï¼ˆå·²å¯¦ç¾ï¼‰

```
/api/
â”œâ”€â”€ public/          # å…¬é–‹ API
â”‚   â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ pricing/
â”‚   â””â”€â”€ pr-packages/
â”‚
â”œâ”€â”€ write/           # å¯«å…¥ API
â”‚   â”œâ”€â”€ contact/
â”‚   â””â”€â”€ newsletter/
â”‚
â”œâ”€â”€ admin/           # ç®¡ç† API
â”‚   â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ pricing/
â”‚   â”œâ”€â”€ pr-packages/
â”‚   â”œâ”€â”€ pr-package-categories/
â”‚   â”œâ”€â”€ contact/
â”‚   â”œâ”€â”€ newsletter/
â”‚   â”œâ”€â”€ media/
â”‚   â”œâ”€â”€ users/       â† æ–°å¢
â”‚   â”œâ”€â”€ invitations/ â† æ–°å¢
â”‚   â””â”€â”€ settings/    â† æ–°å¢
â”‚
â””â”€â”€ auth/            # èªè­‰ API
    â”œâ”€â”€ register
    â”œâ”€â”€ login
    â”œâ”€â”€ me
    â””â”€â”€ google/
```

---

### å»ºè­°çš„æ“´å±•ï¼ˆæœªä¾†ï¼‰

```
/api/
â”œâ”€â”€ public/          # ä¸è®Š
â”œâ”€â”€ write/           # ä¸è®Š
â”œâ”€â”€ admin/           # ä¸è®Š
â”œâ”€â”€ auth/            # ä¸è®Š
â”‚
â”œâ”€â”€ me/              # æ–°å¢ï¼šå€‹äººåŒ– API
â”‚   â”œâ”€â”€ profile
â”‚   â”œâ”€â”€ campaigns
â”‚   â”œâ”€â”€ notifications
â”‚   â””â”€â”€ settings
â”‚
â””â”€â”€ webhook/         # æ–°å¢ï¼šWebhookï¼ˆæœªä¾†ï¼‰
    â”œâ”€â”€ stripe
    â””â”€â”€ resend
```

---

## ğŸ”’ æ¬Šé™çŸ©é™£

| è·¯å¾‘ | éœ€è¦ç™»å…¥ | éœ€è¦æ¬Šé™ | å¿«å– | Rate Limit |
|------|---------|---------|------|-----------|
| `/public/` | âŒ | âŒ | âœ… 1-24h | å¯¬é¬† |
| `/write/` | âŒ* | âŒ | âŒ | åš´æ ¼ |
| `/auth/` | âŒ | âŒ | âŒ | æ¥µåš´æ ¼ |
| `/me/` | âœ… | âŒ | âš ï¸ çŸ­ | ä¸­ç­‰ |
| `/admin/` | âœ… | âœ… admin | âŒ | å¯¬é¬† |

*æŸäº›å¯«å…¥æ“ä½œå¯èƒ½éœ€è¦ç™»å…¥ï¼ˆè¦–æ¥­å‹™éœ€æ±‚ï¼‰

---

## ğŸ¯ æ±ºç­–æŒ‡å—

### å¿«é€Ÿåˆ¤æ–· API æ‡‰è©²æ”¾å“ªè£¡

**å•é¡Œ 1ï¼šèª°å¯ä»¥è¨ªå•ï¼Ÿ**
```
æ‰€æœ‰äºº â†’ ç¹¼çºŒå•é¡Œ 2
ç™»å…¥ç”¨æˆ¶ â†’ ç¹¼çºŒå•é¡Œ 3
ç®¡ç†å“¡ â†’ /admin/
```

**å•é¡Œ 2ï¼šæ˜¯å¦æ”¹è®Šè³‡æ–™ï¼Ÿ**
```
å¦ï¼ˆåªè®€ï¼‰â†’ /public/
æ˜¯ï¼ˆå¯«å…¥ï¼‰â†’ /write/
```

**å•é¡Œ 3ï¼šæ˜¯èªè­‰ç›¸é—œå—ï¼Ÿ**
```
æ˜¯ â†’ /auth/
å¦ â†’ /me/
```

---

## ğŸ“ å¯¦æ–½æ­¥é©Ÿ

### ç•¶å‰å„ªå…ˆç´š

**P0ï¼ˆç«‹å³ï¼‰**ï¼š
- âœ… ä¿®å¾©çµå°¾æ–œç·šå•é¡Œ
- âœ… çµ±ä¸€æ‰€æœ‰ admin API çš„è·¯å¾‘æ ¼å¼
- âœ… æ–‡æª”åŒ–è¦ç¯„

**P1ï¼ˆçŸ­æœŸï¼Œ1-2 é€±ï¼‰**ï¼š
- [ ] æ–°å¢ `/api/me/` åˆ†é¡
- [ ] å¯¦æ–½ Rate Limiting
- [ ] è¨­å®š Cloudflare Workers å¿«å–

**P2ï¼ˆä¸­æœŸï¼Œ1-2 æœˆï¼‰**ï¼š
- [ ] API ç‰ˆæœ¬æ§åˆ¶ï¼ˆv1, v2ï¼‰
- [ ] Webhook æ”¯æ´
- [ ] æ›´ç´°ç²’åº¦çš„æ¬Šé™æ§åˆ¶

---

## ğŸ” ç¨‹å¼ç¢¼å¯©æŸ¥é‡é»

### æ–°å¢ API æ™‚å¿…é ˆæª¢æŸ¥

```markdown
- [ ] è·¯å¾‘åˆ†é¡æ­£ç¢ºï¼ˆpublic/write/admin/auth/meï¼‰
- [ ] prefix ä½¿ç”¨æ¨¡çµ„å±¤ç´šï¼ˆä¸è¦ç”¨è³‡æºæ ¹è·¯å¾‘ï¼‰
- [ ] ç«¯é»ä½¿ç”¨æ˜ç¢ºåç¨±ï¼ˆä¸è¦ç”¨ `/`ï¼‰
- [ ] å‰ç«¯ URL èˆ‡å¾Œç«¯å®šç¾©ä¸€è‡´
- [ ] æ²’æœ‰çµå°¾æ–œç·šä¸ä¸€è‡´
- [ ] æ¬Šé™æª¢æŸ¥æ­£ç¢ºï¼ˆDepends(require_admin)ï¼‰
- [ ] Response model å®Œæ•´
- [ ] æœ¬åœ°ç«¯æ¸¬è©¦é€šé
- [ ] ç”Ÿç”¢ç«¯æ¸¬è©¦é€šéï¼ˆæª¢æŸ¥ Railway æ—¥èªŒï¼‰
```

---

## ğŸ“ æŠ€è¡“èƒŒæ™¯

### RESTful vs Path-Based

**RESTfulï¼ˆResource-Orientedï¼‰**ï¼š
```python
router = APIRouter(prefix="/users")
@router.get("/")       # GET /users/
@router.get("/{id}")   # GET /users/123
```
- å¼·èª¿è³‡æº
- ç¬¦åˆ REST åŸå‰‡
- **ä½†æœ‰æ–œç·šå•é¡Œ**

**Path-Basedï¼ˆHierarchicalï¼‰**ï¼š
```python
router = APIRouter(prefix="/api/admin")
@router.get("/users")       # GET /api/admin/users
@router.get("/users/{id}")  # GET /api/admin/users/123
```
- è·¯å¾‘æ¸…æ™°
- é¿å…æ–œç·šå•é¡Œ
- **VortixPR æ¡ç”¨æ­¤æ–¹å¼**

---

### ç‚ºä»€éº¼ FastAPI æœƒ 307ï¼Ÿ

**ç•¶ URL ä¸åŒ¹é…æ™‚**ï¼š
```python
# å®šç¾©
@router.get("/users/")  # æœ‰æ–œç·š

# è«‹æ±‚
GET /users  # æ²’æ–œç·š

# çµæœ
307 Temporary Redirect â†’ /users/
```

**FastAPI/Starlette çš„è‡ªå‹•é‡å®šå‘**ï¼š
- é è¨­å•Ÿç”¨ï¼ˆ`redirect_slashes=True`ï¼‰
- å¹«åŠ©ã€Œå®¹éŒ¯ã€
- ä½†å¯èƒ½å°è‡´å•é¡Œï¼ˆCORS, Mixed Contentï¼‰

**æœ€ä½³å¯¦è¸**ï¼š
- âœ… ä¿æŒå‰å¾Œç«¯ URL å®Œå…¨ä¸€è‡´
- âœ… é¿å…ä»»ä½•é‡å®šå‘
- âœ… æ¸›å°‘ HTTP å¾€è¿”

---

## ğŸš€ æœªä¾†æ“´å±•

### Webhook APIï¼ˆè¦åŠƒä¸­ï¼‰

```
POST /api/webhook/stripe        # Stripe ä»˜æ¬¾é€šçŸ¥
POST /api/webhook/resend        # Email äº‹ä»¶é€šçŸ¥
POST /api/webhook/github        # GitHub events
```

**ç‰¹æ€§**ï¼š
- ğŸ” éœ€è¦é©—è­‰ç°½å
- âš ï¸ ä¸å¿«å–
- âœ… éåŒæ­¥è™•ç†

---

### GraphQLï¼ˆå¯é¸ï¼‰

```
POST /api/graphql               # GraphQL endpoint
```

**å¦‚æœæœªä¾†éœ€è¦**ï¼š
- è¤‡é›œçš„è³‡æ–™æŸ¥è©¢
- æ¸›å°‘ API è«‹æ±‚æ¬¡æ•¸
- å‰ç«¯å¯è‡ªå®šç¾©æŸ¥è©¢

---

## âœ… æª¢æŸ¥æ¸…å–®

### æ¯æ¬¡æ–°å¢ API

```bash
# 1. ç¢ºèªåˆ†é¡
echo "é€™å€‹ API æ‡‰è©²æ”¾åœ¨å“ªå€‹åˆ†é¡ï¼Ÿ"

# 2. æª¢æŸ¥ç¾æœ‰é¢¨æ ¼
ls backend/app/api/
# åƒç…§åŒé¡åˆ¥çš„ç¾æœ‰ API

# 3. æª¢æŸ¥è·¯å¾‘ä¸€è‡´æ€§
grep "@router" backend/app/api/æ–°æ–‡ä»¶.py

# 4. æª¢æŸ¥å‰ç«¯èª¿ç”¨
grep "API_BASE_URL" frontend/src/pages/admin/æ–°é é¢.tsx

# 5. æ¸¬è©¦
curl http://localhost:8000/api/æ–°è·¯å¾‘

# 6. æª¢æŸ¥æ—¥èªŒï¼ˆç„¡ 307ï¼‰
# Railway logs æˆ–æœ¬åœ°ç«¯ uvicorn æ—¥èªŒ
```

---

**ç¶­è­·è€…**: VortixPR Team  
**åƒè€ƒ**: `API_ROUTES.md`, `API_DESIGN_STANDARDS.md`

---

**æ ¸å¿ƒåŸå‰‡**ï¼šåˆ†é¡æ¸…æ™°ã€æ ¼å¼çµ±ä¸€ã€é¿å…é‡å®šå‘ã€‚



